\hypertarget{index_8php_source}{\section{index.\-php}
}

\begin{DoxyCode}
00001 <?php
00002 define(\textcolor{stringliteral}{'CLASS\_DIR'}, \textcolor{stringliteral}{'classes/'});
00003 
00004 \textcolor{comment}{// PHP Autoloader Funktion definieren.}
00005 spl\_autoload\_register(\textcolor{stringliteral}{'\_\_autoload'}); 
00006 \textcolor{comment}{}
00007 \textcolor{comment}{/**}
00008 \textcolor{comment}{ * }
00009 \textcolor{comment}{ * Wir für den Autoloader von Klassen benötigt}
00010 \textcolor{comment}{ * }
00011 \textcolor{comment}{ * @param       String  $class  Klassenname}
00012 \textcolor{comment}{ * }
00013 \textcolor{comment}{ */}
00014 \textcolor{keyword}{function} \_\_autoload($class) \{
00015  
00016         \textcolor{comment}{// Namespace Backslashe in Slashe für das Filesystem umwandeln}
00017         $file = str\_replace(\textcolor{stringliteral}{"\(\backslash\)\(\backslash\)"}, DIRECTORY\_SEPARATOR, $class).\textcolor{stringliteral}{".php"};
00018  
00019         \textcolor{comment}{// Klasse einbinden ansonsten Exception werfen.}
00020         \textcolor{keywordflow}{if} (file\_exists(CLASS\_DIR . $file)) \{
00021                 require\_once CLASS\_DIR . $file;
00022         \} \textcolor{keywordflow}{else} \{
00023                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{"Autoloaderfehler: "} . $file . \textcolor{stringliteral}{" not found."});
00024         \}
00025 \} 
00026  
00027 \textcolor{keywordflow}{try} \{
00028         
00029         \textcolor{comment}{// Session Initalisieren}
00030         $session = \(\backslash\)Session::getInstance();
00031         
00032         \textcolor{comment}{// Frontcontroller Initalsieren und Aufrufen}
00033         $c = new \(\backslash\)FrontController();
00034         $c->run();
00035         
00036                 
00037 \} \textcolor{keywordflow}{catch} (CustomException\(\backslash\)UserNotAuthedException $e) \{
00038         
00039         $view = new \(\backslash\)View();
00040         $view->setTemplate(\textcolor{stringliteral}{'exception'});
00041         $view->assign(\textcolor{stringliteral}{'h1'}, \textcolor{stringliteral}{"Illegaler Aufruf"});
00042         $view->assign(\textcolor{stringliteral}{'exception'}, $e->getMessage());
00043         $view->display();
00044 
00045 \} \textcolor{keywordflow}{catch} (CustomException\(\backslash\)InvalidUserPassException $e) \{
00046 
00047         $view = new \(\backslash\)View();
00048         $view->setTemplate(\textcolor{stringliteral}{'exception'});
00049         $view->assign(\textcolor{stringliteral}{'h1'}, \textcolor{stringliteral}{"Loginfehler"});
00050         $view->assign(\textcolor{stringliteral}{'exception'}, \textcolor{stringliteral}{"Benutzername und/oder Passwort falsch"});
00051         $view->display();
00052         
00053         
00054 \} \textcolor{keywordflow}{catch} (Exception $e)  \{       
00055         
00056         $view = new \(\backslash\)View();
00057         $view->setTemplate(\textcolor{stringliteral}{'exception'});
00058         $view->assign(\textcolor{stringliteral}{'h1'}, \textcolor{stringliteral}{"Das h&auml;tte nicht passieren d&uuml;rfen"});
00059         $view->assign(\textcolor{stringliteral}{'exception'}, $e->getMessage());
00060         $view->display();
00061 
00062 \}
00063 
00064 
00065 $conf = \(\backslash\)Config::getInstance();
00066 
00067 \textcolor{comment}{// Debugging}
00068 \textcolor{keywordflow}{if} ($conf->application\_debugging == 1) \{
00069         print \textcolor{stringliteral}{"<br /><br />"};
00070         print \textcolor{stringliteral}{"<pre>"};
00071         print \textcolor{stringliteral}{'$\_GET '};
00072         print\_r($\_GET);
00073         print \textcolor{stringliteral}{'$\_POST '};
00074         print\_r($\_POST);
00075         print \textcolor{stringliteral}{'$\_SESSION '};
00076         print\_r($\_SESSION);
00077         print \textcolor{stringliteral}{'$\_SERVER '};
00078         print\_r($\_SERVER);      
00079         print \textcolor{stringliteral}{"</pre>"};
00080 \}
00081 
00082 
00083 ?>
\end{DoxyCode}
